/*! ColReorder 1.3.3-dev
 * Â©2010-2015 SpryMedia Ltd - datatables.net/license
 */
(function(a){if(typeof define==="function"&&define.amd){define(["jquery","datatables.net"],function(b){return a(b,window,document)})}else{if(typeof exports==="object"){module.exports=function(b,c){if(!b){b=window}if(!c||!c.fn.dataTable){c=require("datatables.net")(b,c).$}return a(c,b,b.document)}}else{a(jQuery,window,document)}}}(function(d,e,f,b){var c=d.fn.dataTable;function g(m){var l=[];for(var k=0,j=m.length;k<j;k++){l[m[k]]=k}return l}function h(k,m,l){var j=k.splice(m,1)[0];k.splice(l,0,j)}function a(m,p,o){var l=[];for(var k=0,j=m.childNodes.length;k<j;k++){if(m.childNodes[k].nodeType==1){l.push(m.childNodes[k])}}var n=l[p];if(o!==null){m.insertBefore(n,l[o])}else{m.appendChild(n)}}d.fn.dataTableExt.oApi.fnColReorder=function(o,x,p,q,A){var y,v,w,C,u,r=o.aoColumns.length,n,k;var z=function(G,H,F){if(!G[H]||typeof G[H]==="function"){return}var j=G[H].split(".");var E=j.shift();if(isNaN(E*1)){return}G[H]=F[E*1]+"."+j.join(".")};if(x==p){return}if(x<0||x>=r){this.oApi._fnLog(o,1,"ColReorder 'from' index is out of bounds: "+x);return}if(p<0||p>=r){this.oApi._fnLog(o,1,"ColReorder 'to' index is out of bounds: "+p);return}var s=[];for(y=0,v=r;y<v;y++){s[y]=y}h(s,x,p);var B=g(s);for(y=0,v=o.aaSorting.length;y<v;y++){o.aaSorting[y][0]=B[o.aaSorting[y][0]]}if(o.aaSortingFixed!==null){for(y=0,v=o.aaSortingFixed.length;y<v;y++){o.aaSortingFixed[y][0]=B[o.aaSortingFixed[y][0]]}}for(y=0,v=r;y<v;y++){k=o.aoColumns[y];for(w=0,C=k.aDataSort.length;w<C;w++){k.aDataSort[w]=B[k.aDataSort[w]]}k.idx=B[k.idx]}d.each(o.aLastSort,function(j,E){o.aLastSort[j].src=B[E.src]});for(y=0,v=r;y<v;y++){k=o.aoColumns[y];if(typeof k.mData=="number"){k.mData=B[k.mData]}else{if(d.isPlainObject(k.mData)){z(k.mData,"_",B);z(k.mData,"filter",B);z(k.mData,"sort",B);z(k.mData,"type",B)}}}if(o.aoColumns[x].bVisible){var t=this.oApi._fnColumnIndexToVisible(o,x);var l=null;y=p<x?p:p+1;while(l===null&&y<r){l=this.oApi._fnColumnIndexToVisible(o,y);y++}n=o.nTHead.getElementsByTagName("tr");for(y=0,v=n.length;y<v;y++){a(n[y],t,l)}if(o.nTFoot!==null){n=o.nTFoot.getElementsByTagName("tr");for(y=0,v=n.length;y<v;y++){a(n[y],t,l)}}for(y=0,v=o.aoData.length;y<v;y++){if(o.aoData[y].nTr!==null){a(o.aoData[y].nTr,t,l)}}}h(o.aoColumns,x,p);for(y=0,v=r;y<v;y++){o.oApi._fnColumnOptions(o,y,{})}h(o.aoPreSearchCols,x,p);for(y=0,v=o.aoData.length;y<v;y++){var D=o.aoData[y];var m=D.anCells;if(m){h(m,x,p);for(w=0,u=m.length;w<u;w++){if(m[w]&&m[w]._DT_CellIndex){m[w]._DT_CellIndex.column=w}}}if(D.src!=="dom"&&d.isArray(D._aData)){h(D._aData,x,p)}}for(y=0,v=o.aoHeader.length;y<v;y++){h(o.aoHeader[y],x,p)}if(o.aoFooter!==null){for(y=0,v=o.aoFooter.length;y<v;y++){h(o.aoFooter[y],x,p)}}if(A||A===b){d.fn.dataTable.Api(o).rows().invalidate()}for(y=0,v=r;y<v;y++){d(o.aoColumns[y].nTh).off("click.DT");this.oApi._fnSortAttachListener(o,o.aoColumns[y].nTh,y)}d(o.oInstance).trigger("column-reorder.dt",[o,{from:x,to:p,mapping:B,drop:q,iFrom:x,iTo:p,aiInvertMapping:B}])};var i=function(m,l){var k=new d.fn.dataTable.Api(m).settings()[0];if(k._colReorder){return k._colReorder}if(l===true){l={}}var j=d.fn.dataTable.camelToHungarian;if(j){j(i.defaults,i.defaults,true);j(i.defaults,l||{})}this.s={dt:null,init:d.extend(true,{},i.defaults,l),fixed:0,fixedRight:0,reorderCallback:null,mouse:{startX:-1,startY:-1,offsetX:-1,offsetY:-1,target:-1,targetIndex:-1,fromIndex:-1},aoTargets:[]};this.dom={drag:null,pointer:null};this.s.dt=k;this.s.dt._colReorder=this;this._fnConstruct();return this};d.extend(i.prototype,{fnReset:function(){this._fnOrderColumns(this.fnOrder());return this},fnGetCurrentOrder:function(){return this.fnOrder()},fnOrder:function(r,l){var q=[],p,s,o,k;var n=this.s.dt.aoColumns;if(r===b){for(p=0,s=n.length;p<s;p++){q.push(n[p]._ColReorder_iOrigCol)}return q}if(l){var m=this.fnOrder();for(p=0,s=r.length;p<s;p++){q.push(d.inArray(r[p],m))}r=q}this._fnOrderColumns(g(r));return this},fnTranspose:function(k,l){if(!l){l="toCurrent"}var j=this.fnOrder();var m=this.s.dt.aoColumns;if(l==="toCurrent"){return !d.isArray(k)?d.inArray(k,j):d.map(k,function(n){return d.inArray(n,j)})}else{return !d.isArray(k)?m[k]._ColReorder_iOrigCol:d.map(k,function(n){return m[n]._ColReorder_iOrigCol})}},_fnConstruct:function(){var p=this;var j=this.s.dt.aoColumns.length;var o=this.s.dt.nTable;var n;if(this.s.init.iFixedColumns){this.s.fixed=this.s.init.iFixedColumns}if(this.s.init.iFixedColumnsLeft){this.s.fixed=this.s.init.iFixedColumnsLeft}this.s.fixedRight=this.s.init.iFixedColumnsRight?this.s.init.iFixedColumnsRight:0;if(this.s.init.fnReorderCallback){this.s.reorderCallback=this.s.init.fnReorderCallback}for(n=0;n<j;n++){if(n>this.s.fixed-1&&n<j-this.s.fixedRight){this._fnMouseListener(n,this.s.dt.aoColumns[n].nTh)}this.s.dt.aoColumns[n]._ColReorder_iOrigCol=n}this.s.dt.oApi._fnCallbackReg(this.s.dt,"aoStateSaveParams",function(q,r){p._fnStateSave.call(p,r)},"ColReorder_State");var k=null;if(this.s.init.aiOrder){k=this.s.init.aiOrder.slice()}if(this.s.dt.oLoadedState&&typeof this.s.dt.oLoadedState.ColReorder!="undefined"&&this.s.dt.oLoadedState.ColReorder.length==this.s.dt.aoColumns.length){k=this.s.dt.oLoadedState.ColReorder}if(k){if(!p.s.dt._bInitComplete){var m=false;d(o).on("draw.dt.colReorder",function(){if(!p.s.dt._bInitComplete&&!m){m=true;var q=g(k);p._fnOrderColumns.call(p,q)}})}else{var l=g(k);p._fnOrderColumns.call(p,l)}}else{this._fnSetColumnIndexes()}d(o).on("destroy.dt.colReorder",function(){d(o).off("destroy.dt.colReorder draw.dt.colReorder");d(p.s.dt.nTHead).find("*").off(".ColReorder");d.each(p.s.dt.aoColumns,function(q,r){d(r.nTh).removeAttr("data-column-index")});p.s.dt._colReorder=null;p.s=null})},_fnOrderColumns:function(k){var n=false;if(k.length!=this.s.dt.aoColumns.length){this.s.dt.oInstance.oApi._fnLog(this.s.dt,1,"ColReorder - array reorder does not match known number of columns. Skipping.");return}for(var l=0,j=k.length;l<j;l++){var m=d.inArray(l,k);if(l!=m){h(k,m,l);this.s.dt.oInstance.fnColReorder(m,l,true,false);n=true}}d.fn.dataTable.Api(this.s.dt).rows().invalidate();this._fnSetColumnIndexes();if(!n){return}if(this.s.dt.oScroll.sX!==""||this.s.dt.oScroll.sY!==""){this.s.dt.oInstance.fnAdjustColumnSizing(false)}this.s.dt.oInstance.oApi._fnSaveState(this.s.dt);if(this.s.reorderCallback!==null){this.s.reorderCallback.call(this)}},_fnStateSave:function(p){var m,k,r,o;var j=this.s.dt;var l=j.aoColumns;p.ColReorder=[];if(p.aaSorting){for(m=0;m<p.aaSorting.length;m++){p.aaSorting[m][0]=l[p.aaSorting[m][0]]._ColReorder_iOrigCol}var n=d.extend(true,[],p.aoSearchCols);for(m=0,k=l.length;m<k;m++){o=l[m]._ColReorder_iOrigCol;p.aoSearchCols[o]=n[m];p.abVisCols[o]=l[m].bVisible;p.ColReorder.push(o)}}else{if(p.order){for(m=0;m<p.order.length;m++){p.order[m][0]=l[p.order[m][0]]._ColReorder_iOrigCol}var q=d.extend(true,[],p.columns);for(m=0,k=l.length;m<k;m++){o=l[m]._ColReorder_iOrigCol;p.columns[o]=q[m];p.ColReorder.push(o)}}}},_fnMouseListener:function(j,l){var k=this;d(l).on("mousedown.ColReorder",function(m){m.preventDefault();k._fnMouseDown.call(k,m,l)}).on("touchstart.ColReorder",function(m){k._fnMouseDown.call(k,m,l)})},_fnMouseDown:function(n,m){var k=this;var l=d(n.target).closest("th, td");var o=l.offset();var j=parseInt(d(m).attr("data-column-index"),10);if(j===b){return}this.s.mouse.startX=this._fnCursorPosition(n,"pageX");this.s.mouse.startY=this._fnCursorPosition(n,"pageY");this.s.mouse.offsetX=this._fnCursorPosition(n,"pageX")-o.left;this.s.mouse.offsetY=this._fnCursorPosition(n,"pageY")-o.top;this.s.mouse.target=this.s.dt.aoColumns[j].nTh;this.s.mouse.targetIndex=j;this.s.mouse.fromIndex=j;this._fnRegions();d(f).on("mousemove.ColReorder touchmove.ColReorder",function(p){k._fnMouseMove.call(k,p)}).on("mouseup.ColReorder touchend.ColReorder",function(p){k._fnMouseUp.call(k,p)})},_fnMouseMove:function(n){var m=this;if(this.dom.drag===null){if(Math.pow(Math.pow(this._fnCursorPosition(n,"pageX")-this.s.mouse.startX,2)+Math.pow(this._fnCursorPosition(n,"pageY")-this.s.mouse.startY,2),0.5)<5){return}this._fnCreateDragNode()}this.dom.drag.css({left:this._fnCursorPosition(n,"pageX")-this.s.mouse.offsetX,top:this._fnCursorPosition(n,"pageY")-this.s.mouse.offsetY});var o=false;var k=this.s.mouse.toIndex;for(var l=1,j=this.s.aoTargets.length;l<j;l++){if(this._fnCursorPosition(n,"pageX")<this.s.aoTargets[l-1].x+((this.s.aoTargets[l].x-this.s.aoTargets[l-1].x)/2)){this.dom.pointer.css("left",this.s.aoTargets[l-1].x);this.s.mouse.toIndex=this.s.aoTargets[l-1].to;o=true;break}}if(!o){this.dom.pointer.css("left",this.s.aoTargets[this.s.aoTargets.length-1].x);this.s.mouse.toIndex=this.s.aoTargets[this.s.aoTargets.length-1].to}if(this.s.init.bRealtime&&k!==this.s.mouse.toIndex){this.s.dt.oInstance.fnColReorder(this.s.mouse.fromIndex,this.s.mouse.toIndex,false);this.s.mouse.fromIndex=this.s.mouse.toIndex;this._fnRegions()}},_fnMouseUp:function(k){var j=this;d(f).off(".ColReorder");if(this.dom.drag!==null){this.dom.drag.remove();this.dom.pointer.remove();this.dom.drag=null;this.dom.pointer=null;this.s.dt.oInstance.fnColReorder(this.s.mouse.fromIndex,this.s.mouse.toIndex,true);this._fnSetColumnIndexes();if(this.s.dt.oScroll.sX!==""||this.s.dt.oScroll.sY!==""){this.s.dt.oInstance.fnAdjustColumnSizing(false)}this.s.dt.oInstance.oApi._fnSaveState(this.s.dt);if(this.s.reorderCallback!==null){this.s.reorderCallback.call(this)}}},_fnRegions:function(){var k=this.s.dt.aoColumns;this.s.aoTargets.splice(0,this.s.aoTargets.length);this.s.aoTargets.push({x:d(this.s.dt.nTable).offset().left,to:0});var n=0;var m=this.s.aoTargets[0].x;for(var l=0,j=k.length;l<j;l++){if(l!=this.s.mouse.fromIndex){n++}if(k[l].bVisible&&k[l].nTh.style.display!=="none"){m+=d(k[l].nTh).outerWidth();this.s.aoTargets.push({x:m,to:n})}}if(this.s.fixedRight!==0){this.s.aoTargets.splice(this.s.aoTargets.length-this.s.fixedRight)}if(this.s.fixed!==0){this.s.aoTargets.splice(0,this.s.fixed)}},_fnCreateDragNode:function(){var o=this.s.dt.oScroll.sX!==""||this.s.dt.oScroll.sY!=="";var l=this.s.dt.aoColumns[this.s.mouse.targetIndex].nTh;var k=l.parentNode;var m=k.parentNode;var j=m.parentNode;var n=d(l).clone();this.dom.drag=d(j.cloneNode(false)).addClass("DTCR_clonedTable").append(d(m.cloneNode(false)).append(d(k.cloneNode(false)).append(n[0]))).css({position:"absolute",top:0,left:0,width:d(l).outerWidth(),height:d(l).outerHeight()}).appendTo("body");this.dom.pointer=d("<div></div>").addClass("DTCR_pointer").css({position:"absolute",top:o?d("div.dataTables_scroll",this.s.dt.nTableWrapper).offset().top:d(this.s.dt.nTable).offset().top,height:o?d("div.dataTables_scroll",this.s.dt.nTableWrapper).height():d(this.s.dt.nTable).height()}).appendTo("body")},_fnSetColumnIndexes:function(){d.each(this.s.dt.aoColumns,function(j,k){d(k.nTh).attr("data-column-index",j)})},_fnCursorPosition:function(j,k){if(j.type.indexOf("touch")!==-1){return j.originalEvent.touches[0][k]}return j[k]}});i.defaults={aiOrder:null,bRealtime:true,iFixedColumnsLeft:0,iFixedColumnsRight:0,fnReorderCallback:null};i.version="1.3.3-dev";d.fn.dataTable.ColReorder=i;d.fn.DataTable.ColReorder=i;if(typeof d.fn.dataTable=="function"&&typeof d.fn.dataTableExt.fnVersionCheck=="function"&&d.fn.dataTableExt.fnVersionCheck("1.10.8")){d.fn.dataTableExt.aoFeatures.push({fnInit:function(j){var l=j.oInstance;if(!j._colReorder){var m=j.oInit;var k=m.colReorder||m.oColReorder||{};new i(j,k)}else{l.oApi._fnLog(j,1,"ColReorder attempted to initialise twice. Ignoring second")}return null},cFeature:"R",sFeature:"ColReorder"})}else{alert("Warning: ColReorder requires DataTables 1.10.8 or greater - www.datatables.net/download")}d(f).on("preInit.dt.colReorder",function(m,j){if(m.namespace!=="dt"){return}var n=j.oInit.colReorder;var l=c.defaults.colReorder;if(n||l){var k=d.extend({},n,l);if(n!==false){new i(j,k)}}});d.fn.dataTable.Api.register("colReorder.reset()",function(){return this.iterator("table",function(j){j._colReorder.fnReset()})});d.fn.dataTable.Api.register("colReorder.order()",function(k,j){if(k){return this.iterator("table",function(l){l._colReorder.fnOrder(k,j)})}return this.context.length?this.context[0]._colReorder.fnOrder():null});d.fn.dataTable.Api.register("colReorder.transpose()",function(j,k){return this.context.length&&this.context[0]._colReorder?this.context[0]._colReorder.fnTranspose(j,k):j});return i}));