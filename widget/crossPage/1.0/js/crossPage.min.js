!function(f){var h={pageClicked:"pageClicked",jumpClicked:"jumpClicked",pageSizeChanged:"pageSizeChanged"};var l=function(p,n){var m={total:0,pageSize:10,pageBtnCount:11,showFirstLastBtn:true,firstBtnText:null,lastBtnText:null,layouts:"left",prevBtnText:"\u4e0a\u4e00\u9875",nextBtnText:"\u4e0b\u4e00\u9875",loadFirstPage:true,remote:{url:null,params:null,callback:null,success:null,beforeSend:null,complete:null,pageIndexName:"pageIndex",pageSizeName:"pageSize",totalName:"total"},showInfo:false,showStat:true,infoFormat:"{start} ~ {end} of {total} entires",showJump:true,jumpBtnText:"\u786e\u5b9a",showPageSizes:false,pageSizeItems:null,debug:false,databuffer:false,pageShow:null};this.$element=f(p);this.$page=f('<ul class="c-pagination-page"></ul>');this.$size=f('<div class="c-pagination-size"></div>');this.$jump=f('<div class="c-pagination-jump"></div>');this.$info=f('<div class="c-pagination-info"></div>');this.$stat=f('<ul class="c-pagination-stat"></ul>');this.options=f.extend(true,{},m,f.fn.crossPage.defaults,n);this.total=this.options.total||0;this.options.pageSizeItems=this.options.pageSizeItems||[5,10,15,20],this.currentPageIndex=0;this.currentPageSize=this.options.pageSize;this.pageCount=i(this.total,this.currentPageSize);this.clicked=[];if(this.options.remote.success==null){this.options.remote.success=this.options.remote.callback}var q=function(u){var t=u;var s=f('<select data-page-btn="size"></select>');for(var r=0;r<t.options.pageSizeItems.length;r++){s.append('<option value="'+t.options.pageSizeItems[r]+'">'+t.options.pageSizeItems[r]+"</option>")}s.val(t.currentPageSize);t.$size.append(s);var v='<div class="c-pagination-group"><span class="fl c-pagination-grouptext">\u8df3\u8f6c\u81f3</span><input type="text"><button data-page-btn="jump" type="button">'+t.options.jumpBtnText+"</button></div>";t.$jump.append(v);t.$jump.find("input").change(function(){if(!c(this.value,t.pageCount)){this.value=null}});t.$element.append(t.$page.hide());t.$element.append(t.$size.hide());t.$element.append(t.$stat.hide());t.$element.append(t.$jump.hide());t.$element.append(t.$info.hide());t._remoteOrRedner(0);t.$element.on("click",{page:t},function(w){o(w)}).on("change",{page:t},function(w){o(w)});switch(t.options.layouts){case"left":t.$element.addClass("fl");break;case"center":t.$element.addClass("fl").css("padding-left",t.$element.outerWidth()/2-100);break;case"right":t.$element.addClass("fr");break}};var o=function(w){var v=w.data.page;var s=f(w.target);if(w.type==="click"&&s.data("pageIndex")!==undefined&&!s.parent().hasClass("active")){var r=f(w.target).data("pageIndex");v.$element.trigger(h.pageClicked,r);v.debug("event[ pageClicked ] : pageIndex = "+(r));v._remoteOrRedner(r)}else{if(w.type==="click"&&s.data("pageBtn")==="jump"){var u=v.$jump.find("input").val();if(c(u,v.pageCount)){var r=u-1;v.$element.trigger(h.jumpClicked,r);v.debug("event[ jumpClicked ] : pageIndex = "+(r));v._remoteOrRedner(r)}v.$jump.find("input").val(null)}else{if(w.type==="change"&&s.data("pageBtn")==="size"){var t=v.$size.find("select").val();v.currentPageSize=t;v.$element.trigger(h.pageSizeChanged,t);v.debug("event[ pageSizeChanged ] : pageSize = "+t);v._remoteOrRedner(0)}}}};if(typeof this.options.total==="undefined"&&this.options.remote.url===null){console&&console.error("[init error] : the options must have the parameter of 'remote.url' or 'total'.")}else{if(typeof this.options.total==="undefined"&&!this.options.loadFirstPage){console&&console.error("[init error] : if you don't remote the first page. you must set the options or 'total'.")}else{q(this)}}};l.prototype={_remoteOrRedner:function(n){var o=this,m=true;if(this.options.databuffer){f(this.clicked).each(function(p,q){if(n==q){o.renderPagination(n);if(typeof o.options.pageShow==="function"){o.options.pageShow(n)}m=false}})}if(m){if(this.options.remote.url!=null&&(this.options.loadFirstPage||n>0)){this.remote(n)}else{this.renderPagination(n);if(typeof o.options.pageShow==="function"){o.options.pageShow(n)}}}},remote:function(m,q){var o=this;if(isNaN(parseInt(m))||typeof m==="object"){q=m;m=null}if(isNaN(parseInt(m))){m=o.currentPageIndex}var n={};n[this.options.remote.pageIndexName]=m;n[this.options.remote.pageSizeName]=this.currentPageSize;this.options.remote.params=e(this.options.remote.params);if(q){q=e(q);this.options.remote.params=f.extend({},this.options.remote.params,q)}var p=f.extend({},this.options.remote.params,n);f.ajax({url:this.options.remote.url,dataType:"json",data:p,contentType:"application/Json",async:false,beforeSend:function(r){if(typeof o.options.remote.beforeSend==="function"){o.options.remote.beforeSend(r)}},complete:function(s,r){if(typeof o.options.remote.complete==="function"){o.options.remote.complete(s,r)}},success:function(r){o.debug("ajax request : params = "+JSON.stringify(p),r);var s=k(r,o.options.remote.totalName);if(s==null||s==undefined){console&&console.error("the response of totalName :  '"+o.options.remote.totalName+"'  not found")}else{o._updateTotal(s);if(typeof o.options.remote.success==="function"){o.options.remote.success(r,m)}o.renderPagination(m)}o.clicked.push(m)}})},renderPagination:function(n){this.currentPageIndex=n;var m=d(this.currentPageIndex,this.currentPageSize,this.total,this.options.pageBtnCount,this.options.firstBtnText,this.options.lastBtnText,this.options.prevBtnText,this.options.nextBtnText,this.options.showFirstLastBtn);this.$page.empty().append(m);this.$info.text(g(this.currentPageIndex,this.currentPageSize,this.total,this.options.infoFormat));if(this.options.showStat){this.$stat.show()}if(this.pageCount>1){this.$page.show();if(this.options.showPageSizes){this.$size.show()}if(this.options.showJump){this.$jump.show()}if(this.options.showInfo){this.$info.show()}}else{if(this.pageCount==1){if(this.options.showInfo){this.$info.show()}this.$jump.hide()}else{this.$page.hide();this.$size.hide();this.$jump.hide();this.$info.hide()}}},_updateTotal:function(m){this.total=m;this.pageCount=i(m,this.currentPageSize);this.$stat.html("<li><span>\u5171<em>"+this.pageCount+"</em>\u9875</span></li>")},destroy:function(){this.$element.unbind().data("page",null).empty()},debug:function(m,n){if(this.options.debug&&console){m&&console.info(m);n&&console.info(n)}}};var g=function(r,q,n,m){var p=(r*q)+1;var o=(r+1)*q;o=o>=n?n:o;return m.replace("{start}",p).replace("{end}",o).replace("{total}",n)};var d=function(u,C,D,m,p,s,y,o,n){u=u==undefined?1:parseInt(u)+1;var v=i(D,C);var t=[];if(v<=m){t=b(1,v,u)}else{var r=j(p||1,0);var B=j(s||v,v-1);var q=j(y,u-2);var x=j(o,u);var z=(m-1-4)/2;if(!n){z=z+1}var w=(m+1)/2;var A=v-((m+1)/2);z=z.toString().indexOf(".")==-1?z:z+0.5;w=w.toString().indexOf(".")==-1?w:w+0.5;A=A.toString().indexOf(".")==-1?A:A+0.5;if(u<=w){if(n){t=b(1,m-2,u);t.push(x);t.push(B)}else{t=renderPagenderPage(1,m-1,u);t.push(x)}}else{if(u>A){if(n){t=b(v-m+3,m-2,u);t.unshift(q);t.unshift(r)}else{t=b(v-m+2,m-1,u);t.unshift(q)}}else{if(n){t=b(u-z,m-4,u);t.unshift(q);t.push(x);t.unshift(r);t.push(B)}else{t=b(u-z,m-2,u);t.unshift(q);t.push(x)}}}}return t};var b=function(m,q,p){var o=[];for(var n=0;n<q;n++){var r=j(m,m-1);if(m==p){r.addClass("active")}o.push(r);m++}return o};var j=function(n,m){return f("<li><a data-page-index='"+m+"'>"+n+"</a></li>")};var i=function(p,m){var n=0;var p=parseInt(p);var o=p/m;n=o.toString().indexOf(".")!=-1?parseInt(o.toString().split(".")[0])+1:o;return n};var e=function(p){var q={};if(typeof p==="string"){var m=p.split("&");for(var o=0;o<m.length;o++){var n=m[o].split("=");q[n[0]]=decodeURIComponent(n[1])}}else{if(p instanceof Array){for(var o=0;o<p.length;o++){q[p[o].name]=decodeURIComponent(p[o].value)}}else{if(typeof p==="object"){q=p}}}return q};var c=function(m,n){var o=/^\+?[1-9][0-9]*$/;return o.test(m)&&parseInt(m)<=parseInt(n)};var k=function(p,n){var m=n.split(".");var o=p;var r=null;for(var q=0;q<m.length;q++){o=a(o,m[q]);if(!isNaN(parseInt(o))){r=o;break}if(o==null){break}}return r};var a=function(o,n){for(var m in o){if(m==n){return o[m]}}return null};f.fn.crossPage=function(n){var m=arguments;return this.each(function(){var r=f(this);var q=r.data("page");if(!q&&(typeof n==="object"||typeof n==="undefined")){var p=typeof n=="object"&&n;var o=r.data();p=f.extend(p,o);r.data("page",(q=new l(this,p)))}else{if(q&&typeof n==="string"){q[n].apply(q,Array.prototype.slice.call(m,1))}else{if(!q){console&&console.error("jQuery Pagination Plugin is uninitialized.")}}}})}}(window.jQuery);